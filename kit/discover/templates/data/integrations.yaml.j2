# integrations.yaml.j2 - External services, third-party vendors
# REFS: index.yaml

# INTEGRATIONS
integrations:
{% for int in integrations %}
  - id: "{{ int.id }}"
    name: "{{ int.name }}"
    vendor: "{{ int.vendor }}"
    type: "{{ int.type }}"
    description: "{{ int.description }}"
    protocol: "{{ int.connection.protocol }}"
    endpoint: "{{ int.connection.endpoint }}"
    authentication: "{{ int.connection.authentication }}"
    direction: "{{ int.connection.direction }}"
    data_exchanged:
{% for data in int.data_exchanged %}
      - data_id: "{{ data.data_id }}"
        direction: "{{ data.direction }}"
        purpose: "{{ data.purpose }}"
{% endfor %}
    dpa_signed: {{ int.compliance.dpa_signed }}
    data_location: "{{ int.compliance.data_location }}"
    certifications: [{% for cert in int.compliance.certifications %}"{{ cert }}"{% if not loop.last %}, {% endif %}{% endfor %}]
    encryption_in_transit: {{ int.security.encryption_in_transit }}
    encryption_at_rest: {{ int.security.encryption_at_rest }}
    audit_logging: {{ int.security.audit_logging }}
    criticality: "{{ int.criticality }}"
    fallback_strategy: "{{ int.fallback_strategy }}"
{% endfor %}
